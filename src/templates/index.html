<!DOCTYPE html>
<html>
<head>
    <title>Change Specialists - Contract Management</title>
    <script>
    async function loadCompanies() {
        let response = await fetch('/api/companies');
        let companies = await response.json();
        let companySelect = document.getElementById('company');
        companies.forEach(c => {
            let option = document.createElement('option');
            option.value = c.companyNumber || c.companyNumber; // Adjust as needed
            option.text = c.CompanyName || c.company_name;
            companySelect.appendChild(option);
        });
    }

    async function loadContacts() {
        let response = await fetch('/api/contacts');
        let contacts = await response.json();
        let contactSelect = document.getElementById('contact');
        contacts.forEach(c => {
            let option = document.createElement('option');
            option.value = c.ContactId || c.name;
            option.text = c.ContactName || c.name;
            contactSelect.appendChild(option);
        });
    }

    window.onload = function() {
        loadCompanies();
        loadContacts();
    };
    </script>
</head>
<body>

    <form method="POST">
        <h1>Company & Contact Picker</h1>
        <label for="company">Company:</label>
        <select id="company" name="company">
            {% for item in items %}
                <option value="{{ item }}" {% if selected_item == item %}selected{% endif %}>{{ item }}</option>
            {% endfor %}
        </select>
    
        <button type="submit">Select Company</button>
        <br>

        <label for="contact">Contact:</label>
        <select id="contact" name ="contact">
            {% for item2 in items2 %}
                <option value="{{ item2 }}" {% if selected_item == item2 %}selected{% endif %}>{{ item2 }}</option>
            {% endfor %}
        </select>

        <button type="submit">Select Contact</button>
        <br>

    </form>

    <h2>Your Selected Data:</h2>
    {% if selected_item %}
    <p>{{ selected_item }}</p>
    {% endif %}
    {% if selected_item2 %}
    <p>{{ selected_item2 }}</p>
    {% endif %}
    
</body>
</html>
